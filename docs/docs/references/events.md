---
categories:
- reference
description: Reference documentation for Etcha's Events
title: Events
---

Etcha's event system allows for users to trigger and chain [Patterns]({{< ref "/docs/references/patterns" >}}) dynamically.  Etcha also uses this event system to extract information from [Commands]({{< ref "/docs/references/commands" >}}).

## Triggering

All Events are triggered using Command [`onChange`]({{< ref "/docs/references/commands#onchange" >}}) values--Events are specified here by prefixing their name with `etcha:`:

```json
{
  "always": true,
  "change": "echo hello event handler!",
  "id": "event issuer",
  "onChange": {
    "etcha:my_event"
  }
}
```

**The config souce must be allowed to fire the event using {{% config sources_eventsSend %}}**

## Handling

Events are sent and received from {{% config sources %}}.  A Source specifies the events it can receive and send.  Events will also set [environment variables]({{% ref "/docs/references/commands#environment-variables" %}}).

## System Events

These are the event names Etcha already knows about and what they're used for:

### buildManifest

Firing this event during a `build` will add the output of the [Command's `change`]({{< ref "/docs/references/commands#change" >}}) to the [JWT's `etchaBuildManifest` property]({{< ref "/docs/references/jwt#etchabuildmanifest" >}}).

### exit

Firing this event during a `run` will cause Etcha to cleanly exit.  Any Sources that {{% config sources_eventsReceive receive %}} this event will fire first, and Etcha will save any JWTs to disk.  This is mostly used to trigger clean restarts of Etcha from within a Pattern.

### jwt

- Firing this event during {{% config build_signingCommands %}} will set the output of the [Command's `change`]({{< ref "/docs/references/commands#change" >}}) to be the entire JWT generated by build.
- Firing this event during {{% config run_verifyCommands %}} will have Etcha use the output of the [Command's `change`]({{< ref "/docs/references/commands#change" >}})) for the JWT Token.  Etcha will also **not verify** the token, as it assumes the verify commands have passed.

**DO NOT TRIGGER THIS EVENT IF THE TOKEN IS NOT VERIFIED**

### pull

This event is fired after a [pull]({{< ref "/docs/guides/running-patterns#pull" >}}) is performed.  The event will be fired even if the pull commands have errors.  Useful for sending notifications after a pull is performed.

### push

This event is fired after a [push]({{< ref "/docs/guides/running-patterns#remote-push" >}}) is performed from the push target.  The event will be fired even if the Push commands have errors.  Useful for sending notifications after a push is performed.

### runVar_

Firing any event with this prefix during a `build` will add the output of the [Command's `change`]({{< ref "/docs/references/commands#change" >}}) to the [JWT's `etchaRunVars` property]({{< ref "/docs/references/jwt#etcharunvars" >}}).

### shell

This event is fired after a [shell]({{< ref "/docs/guides/shell-access" >}}) is started.

### stdout

Firing this event will log the output of the [Command's `change`]({{< ref "/docs/references/commands#change" >}}) to stdout.

### webhookBody

Firing this event during a [Webhook]({{< ref "/docs/guides/running-patterns#remote-run-via-webhooks" >}}) will have Etcha use the output of the [Command's `change`]({{< ref "/docs/references/commands#change" >}}) for the webhook response.

### webhookContentType

Firing this event during a [Webhook]({{< ref "/docs/guides/running-patterns#remote-run-via-webhooks" >}}) will have Etcha use the output of the [Command's `change`]({{< ref "/docs/references/commands#change" >}}) for the webhook content-type header.
